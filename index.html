<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Birthday, Vaibhav üß∏üíñ</title>
  <style>
    :root{
      --pink:#ff8fb7;          /* primary romantic pink */
      --pink-deep:#ff5a98;     /* deeper accent */
      --bg:#fff6fa;            /* soft background */
      --text:#4a2b3b;          /* warm cocoa text */
      --accent:#ffd3e6;        /* light border */
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; color:var(--text); background:var(--bg); overflow-x:hidden;}

    /* INTRO (teddy background) */
    .intro-screen{min-height:100vh; background:url('assets/teddy-bg.jpeg') center/cover no-repeat fixed; display:flex; align-items:center; justify-content:center; padding:20px;}
    .intro-card{ width:min(760px, 92vw); background:rgba(255,255,255,0.68); backdrop-filter: blur(8px); border:1px solid var(--accent); border-radius:26px; padding:34px; text-align:center; box-shadow:0 20px 56px rgba(255,90,152,0.28);}
    .intro-card h1{font-size:38px; margin-bottom:8px}
    .btn{ background:var(--pink); color:#fff; border:none; padding:14px 20px; border-radius:16px; font-weight:800; font-size:18px; cursor:pointer; box-shadow:0 14px 32px rgba(255,90,152,.32); transition: transform .08s ease}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .ghost{background:#fff; color:var(--pink); border:2px solid var(--pink); box-shadow:none}

    /* STAGES */
    #stage-quiz,#stage-explain,#stage-gallery,#stage-final{display:none}
    .container{max-width:760px; margin:0 auto; padding:24px}

    /* QUIZ CARD */
    .card{ position:relative; background:linear-gradient(180deg,#fff 0%, #fff7fb 100%); border:1px solid var(--accent); border-radius:26px; padding:28px 28px 24px; box-shadow:0 18px 50px rgba(255,90,152,.18)}
    .teddy-tag{ position:absolute; right:-6px; top:-6px; background:var(--pink); color:#fff; padding:8px 12px; border-bottom-left-radius:12px; font-weight:800; letter-spacing:.2px; box-shadow:0 10px 22px rgba(255,90,152,.25)}
    .q{ font-size:22px; font-weight:900; margin:10px 0 14px}
    .pill{ display:inline-block; background:#fff0f6; border:1px solid var(--accent); color:#b83e79; padding:6px 12px; border-radius:999px; font-size:13px; font-weight:800}
    .progress{ height:12px; background:#ffe3f0; border-radius:999px; overflow:hidden; margin:12px 0 22px}
    .bar{ height:100%; width:0%; background:linear-gradient(90deg, var(--pink), var(--pink-deep)); transition: width .35s ease}
    .opt{ width:100%; text-align:left; background:#fff; border:2px solid var(--accent); border-radius:16px; padding:14px 16px; font-size:16px; cursor:pointer; margin:6px 0; transition:border-color .12s ease, transform .04s}
    .opt:hover{ border-color: var(--pink)}
    .opt:active{ transform: scale(.996)}
    .opt.correct{ border-color:#37cc7a; box-shadow:0 8px 18px rgba(55,204,122,.18)}
    .opt.wrong{ border-color:#ff7272; box-shadow:0 8px 18px rgba(255,114,114,.18)}

    /* EXPLANATION MODAL (centered; no blur/darken background effects) */
    #expOverlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:30 }
    #expBox{ background:#fff; border:1px solid var(--accent); border-radius:20px; width:min(560px, 94vw); padding:22px 22px; text-align:center; box-shadow:0 18px 50px rgba(255,90,152,.25) }
    #expText{ font-size:18px; line-height:1.6 }

    /* GALLERY (full-page masonry) */
    #stage-gallery .card{ padding:26px }
    .gal-title{ text-align:center; font-size:30px; margin:6px 0 10px }
    #gallery-grid{ column-count:4; column-gap:14px; margin-top:14px }
    #gallery-grid img{ width:100%; border-radius:14px; margin:0 0 14px; display:block; transition: transform .22s ease, filter .22s ease; cursor:pointer }
    #gallery-grid img:hover{ transform:scale(1.06); filter:brightness(1.05) }
    @media (max-width:900px){ #gallery-grid{ column-count:3 } }
    @media (max-width:680px){ #gallery-grid{ column-count:2 } }

    /* FINAL MESSAGE */
    .final h2{ font-size:36px; text-align:center; margin:0 0 8px }
    .final .msg{ font-size:20px; line-height:1.75; background:#fff; border:1px solid var(--accent); border-radius:22px; padding:18px; box-shadow:0 14px 40px rgba(255,90,152,.15); text-align:center }
    .final .big{ font-size:28px; font-weight:900; color:#b02864 }

    /* HEART CONFETTI */
    .heart{ position:fixed; font-size:20px; pointer-events:none; animation: up 5s linear forwards }
    @keyframes up{ to{ transform: translateY(-120vh) rotate(360deg); opacity:0 } }

    /* FLOAT MUSIC BUTTON */
    #musicReplay{ position:fixed; bottom:18px; right:18px; background:var(--pink); color:#fff; border:none; border-radius:50%; padding:14px 16px; font-size:20px; box-shadow:0 12px 28px rgba(255,90,152,.35); cursor:pointer; z-index:50 }
  </style>
</head>
<body>

  <!-- INTRO -->
  <section id="stage-intro" class="intro-screen">
    <div class="intro-card">
      <h1>Hi Vaibhav üß∏üíñ</h1>
      <p style="font-size:18px; opacity:.85; margin-bottom:16px">A tiny birthday game made with love ‚Äî answer a few cute questions, one by one. At the end‚Ä¶ a surprise! üéÇ‚ú®</p>
      <button class="btn" id="startBtn">Start the game</button>
      <div class="pill" style="margin-top:10px; display:inline-block">Sound on üîä recommended</div>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="stage-quiz" class="container">
    <div class="card">
      <div class="teddy-tag">üß∏ Teddy Love</div>
      <div style="display:flex; gap:10px; justify-content:space-between; align-items:center; margin-bottom:6px">
        <div class="pill" id="progressText">Question 1 of 7</div>
        <div class="pill">Made with üíó by your girl</div>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="q" id="qText">Question</div>
      <div id="opts"></div>
      <div style="display:flex; justify-content:flex-end; margin-top:14px">
        <button class="btn ghost" id="nextBtn" disabled>Next ‚ûú</button>
      </div>
    </div>
  </section>

  <!-- EXPLANATION (centered modal overlay; no dim/blur) -->
  <div id="stage-explain">
    <div id="expOverlay">
      <div id="expBox">
        <div id="expText">Explanation here‚Ä¶</div>
        <div style="margin-top:16px">
          <button class="btn" id="expContinue">Continue ‚ûú</button>
        </div>
      </div>
    </div>
  </div>

  <!-- GALLERY (full-page masonry) -->
  <section id="stage-gallery" class="container">
    <div class="card">
      <h2 class="gal-title">Now let's look at the gallery of you that lives in my heart üíñ</h2>
      <div style="text-align:center; margin-bottom:10px">
        <button class="btn" id="openGallery">Let's go ‚ûú</button>
      </div>
      <div id="gallery-grid"></div>
      <div style="text-align:center; margin-top:14px">
        <button class="btn ghost" id="finishGallery">Continue</button>
      </div>
    </div>
  </section>

  <!-- FINAL -->
  <section id="stage-final" class="container final">
    <div class="card">
      <h2>Happy Birthday Vaibhav üéÇüíó</h2>
      <p class="msg" id="finalText">
        <span class="big">Wish you a very very happy birthday, Vaibhav! üéÇüßÅüíê</span><br/><br/>
        Thank you so much for becoming the most valuable part of my life. You mean the world to me‚Ä¶ üíû
        Thank youuu so much, ‡§Æ‡§æ‡§ù‡•ç‡§Ø‡§æ life ‡§ö‡§æ ‡§á‡§§‡§ï‡§æ ‡§Æ‡•ã‡§†‡§æ part ‡§¨‡§®‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä‚ù§Ô∏è
        ‡§Æ‡•Ä ‡§ñ‡•Ç‡§™ ‡§ñ‡•Å‡§∂ ‡§Ü‡§π‡•á ‡§Ü‡§£‡§ø ‡§®‡•á‡§π‡§Æ‡•Ä ‡§∞‡§æ‡§π‡§£‡§æ‡§∞ ‡§ï‡§æ‡§∞‡§£ ‡§§‡•Ç ‡§®‡•á‡§π‡§Æ‡•Ä ‡§Æ‡§æ‡§ù‡•ç‡§Ø‡§æ ‡§∏‡•ã‡§¨‡§§ ‡§Ü‡§π‡•á‡§∏‚ù§Ô∏èüòÅ
        ‡§Ü‡§£‡§ø don't worry ‡§§‡•ç‡§∞‡§æ‡§∏ ‡§§‡§∞ ‡§Æ‡•Ä ‡§§‡•Å‡§≤‡§æ ‡§®‡•á‡§π‡§Æ‡•Ä‡§ö ‡§¶‡•á‡§£‡§æ‡§∞ ‡§Ü‡§π‡•á ‡§§‡•ç‡§Ø‡§æ ‡§™‡§æ‡§∏‡•Ç‡§® ‡§§‡•Å‡§ù‡•Ä ‡§∏‡•Å‡§ü‡§ï‡§æ ‡§®‡§æ‡§π‡•Ä ‡§Ü‡§π‡•á üòÅüòö
        ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ life ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§§‡•Å‡§≤‡§æ ‡§§‡•á ‡§∏‡§∞‡•ç‡§µ ‡§≠‡•á‡§ü‡•ã ‡§ú‡•á ‡§§‡•Ç ‡§®‡•á‡§π‡§Æ‡•Ä ‡§¶‡•á‡§µ‡§æ‡§≤‡§æ ‡§Æ‡§æ‡§ó‡§ø‡§§‡§≤ ‡§Ü‡§π‡•á‡§∏.‚ù£Ô∏è ‡§Ü‡§£‡§ø ‡§Æ‡§≤‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§Ü‡§π‡•á ‡§¶‡•á‡§µ‡§æ‡§µ‡§∞ ‡§ï‡•Ä ‡§§‡•á ‡§§‡•Å‡§≤‡§æ ‡§¶‡•á‡§£‡§æ‡§∞‡§ö ‡§Ü‡§π‡•á ‡§ú‡•á ‡§™‡§£ ‡§§‡•Ç ‡§Æ‡§æ‡§ó‡§£‡§æ‡§∞. üòä
        ‡§®‡•á‡§π‡§Æ‡•Ä ‡§Ö‡§∏‡§æ‡§ö ‡§∞‡§æ‡§π‡§æ bubuüòò
        I am so so ss proud of you !!!!!! üòç
      </p>
      <div style="margin-top:14px; display:flex; gap:10px; justify-content:center;">
        <button class="btn" id="replayFinal">Replay message üîÅ</button>
        <button class="btn ghost" id="restart">Play again</button>
      </div>
      <div class="pill" style="margin-top:10px; display:inline-block">Audio should be playing now üéß If not, tap Replay.</div>
    </div>
  </section>

  <!-- MUSIC CONTROLS -->
  <button id="musicReplay" title="Replay background music">üîä</button>

  <!-- AUDIO SOURCES -->
  <audio id="quizMusic" src="assets/quiz-music.mp3" preload="auto" loop></audio>
  <audio id="finalVoice" src="assets/vaibhav-voice.mp3" preload="auto"></audio>

  <script>
/*********************** QUIZ DATA ************************/ 
const QUESTIONS = [
  { text: "What was the first gift I gave you?", options: ["perfume","cute little cat and letter box","panda bracelet"], correct: 1, exp: `Mi first time asa kahi tari karaycha try kela hota ü§≠.. tula te gift pathvtana mi itki excited hoti ki vicharu nako‚ù§Ô∏è, asa watat hota ki maza je ahe sarva tula pathvun deu..üòç‚ù§Ô∏è` },
  { text: "What nickname do I use for you the most?", options: ["bubu","shonu","pillu","baby"], correct: 0, exp: `Tashe tar mi sarvech nickname ni bolvte tula... But bubu mi sarvyat jast use karteü§≠ü§≠‚ù§Ô∏è because you are my bubu my cute little bachha‚ù£Ô∏è` },
  { text: "What is the moment you realized you love me?", options: ["in school","in lockdown","in college","during our friendship"], correct: 3, exp: `Tuzya premat padayla mala jast time navtach lagla, karan tu aahech itka changla ki mi kayach karu mala samjt nhi ü§≠ü§≠ü§≠üòòüòòüòòüòò` },
  { text: "Who takes longer to reply?", options: ["Vaibhav","Gauri","depends on mood"], correct: 2, exp: `I agree Ani mala mhit ahe ki mi reply dyayla time lagte but next time pasun mi krnr try lavkr dyaycha reply üòÅüòÅ` },
  { text: "Who is more jealous?", options: ["Vaibhav","Gauri","both"], correct: 2, exp: `Jealous tr apan dogha pan hoto bachha... Mala mahit ahe Ani thoda thoda tar whayla pan pahije n ü§≠ü§≠üòò` },
  { text: "Who is more possessive?", options: ["Vaibhav","Gauri"], correct: 0, exp: `Possessive asnyacha title mi tula dete ahe karan tu aahech jitka mala mahit ahe samjla ka üòåüòåü§™` },
  { text: "Who is the most annoying one?", options: ["vaibhav","just vaibhav","always vaibhav"], correct: 2, exp: `You are the mosttt mostt mostt annoying....üòõüòõüòÜ And also the most loving personnü•π‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è` }
];

/*********************** ELEMENTS *************************/
const stageIntro = document.getElementById('stage-intro');
const stageQuiz  = document.getElementById('stage-quiz');
const stageExplain = document.getElementById('stage-explain');
const expOverlay = document.getElementById('expOverlay');
const expText = document.getElementById('expText');
const stageGallery = document.getElementById('stage-gallery');
const stageFinal = document.getElementById('stage-final');

const qText  = document.getElementById('qText');
const optsEl = document.getElementById('opts');
const bar    = document.getElementById('bar');
const progressText = document.getElementById('progressText');
const nextBtn  = document.getElementById('nextBtn');
const expContinue = document.getElementById('expContinue');

const openGallery = document.getElementById('openGallery');
const galleryGrid = document.getElementById('gallery-grid');
const finishGallery = document.getElementById('finishGallery');

const replayFinal = document.getElementById('replayFinal');
const restart = document.getElementById('restart');

const musicReplay = document.getElementById('musicReplay');
const quizMusic = document.getElementById('quizMusic');
const finalVoice = document.getElementById('finalVoice');

/*********************** STATE *****************************/
let index = 0; let locked = false; let explanationPending = false;

/*********************** START *****************************/
document.getElementById('startBtn').addEventListener('click', () => {
  stageIntro.style.display='none';
  stageQuiz.style.display='block';
  index = 0; locked=false; explanationPending=false;
  nextBtn.disabled = true;

  try { quizMusic.volume = 0.42; quizMusic.play().catch(()=>{}); } catch(e) {}

  renderQuestion();
});

function renderQuestion(){
  const q = QUESTIONS[index];
  qText.textContent = q.text;
  progressText.textContent = `Question ${index+1} of ${QUESTIONS.length}`;
  bar.style.width = `${(index)/QUESTIONS.length*100}%`;

  optsEl.innerHTML = '';
  nextBtn.disabled = true;
  locked = false;
  explanationPending = false;

  q.options.forEach((opt, i)=>{
    const b = document.createElement('button');
    b.className='opt';
    b.textContent = opt;
    b.addEventListener('click',()=> choose(i));
    optsEl.appendChild(b);
  });
}

function choose(i){
  if(locked) return;
  locked=true;

  const q = QUESTIONS[index];
  const buttons = Array.from(optsEl.querySelectorAll('button'));

  buttons.forEach((b, idx) => {
    b.disabled = true;
    if(idx === q.correct) b.classList.add('correct');
  });

  if(i !== q.correct){ buttons[i].classList.add('wrong'); }

  expText.innerHTML = q.exp;
  explanationPending = true;
  nextBtn.disabled = false;
}

nextBtn.addEventListener('click', () => {
  if(explanationPending){
    showExplanation();
  } else {
    goNext();
  }
});

/********** ‚úÖ FIXED VERSION **********/
function showExplanation(){
  stageExplain.style.display = "block";
  expOverlay.style.display = "flex";
}

expContinue.addEventListener('click', () => {
  expOverlay.style.display = "none";
  stageExplain.style.display = "none";
  explanationPending = false;
  goNext();
});
/*****************************************/

function goNext(){
  index++;
  if(index < QUESTIONS.length){
    renderQuestion();
  } else {
    stageQuiz.style.display='none';
    stageGallery.style.display='block';
  }
}

/*********************** GALLERY ***************************/
const galleryImages = Array.from({length:25}, (_,i)=>`images/img${i+1}.jpeg`);

openGallery.addEventListener('click', () => {
  if(galleryGrid.children.length===0){
    galleryImages.forEach(src=>{
    const img = document.createElement('img');
    img.loading = 'lazy';
    img.src = src;

    // ‚úÖ FULL SCREEN ZOOM ON CLICK
    img.addEventListener("click", () => {
        document.getElementById("previewImg").src = src;
        document.getElementById("imgPreviewOverlay").style.display = "flex";
    });

    galleryGrid.appendChild(img);
});

  }
});

finishGallery.addEventListener('click', () => {
  stageGallery.style.display='none';
  showFinal();
});

/*********************** FINAL *****************************/
function showFinal(){
  stageFinal.style.display='block';
  quizMusic.pause();
  playFinalVoice();
  burstHearts();
}

function playFinalVoice(){
  finalVoice.currentTime = 0;
  finalVoice.play().catch(()=>{});
}

replayFinal.addEventListener('click', playFinalVoice);
restart.addEventListener('click', () => location.reload());

function burstHearts(){
  const icons = ['üíñ','üíó','üíì','üíû','üíï','üß∏'];
  for(let i=0;i<40;i++){
    const span = document.createElement('span');
    span.className='heart';
    span.textContent = icons[Math.floor(Math.random()*icons.length)];
    span.style.left = Math.random()*100 + 'vw';
    span.style.bottom = '-24px';
    span.style.animationDuration = (3 + Math.random()*3) + 's';
    document.body.appendChild(span);
    setTimeout(()=> span.remove(), 6000);
  }
}

/*********************** MUSIC *****************************/
musicReplay.addEventListener('click', ()=>{
  quizMusic.play().catch(()=>{});
});
</script>

</body>
</html>